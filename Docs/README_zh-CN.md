[English](README.md) | **简体中文**

<h1 align="center">虚空之中</h1>

一款基于 Unity™ 的类银河恶魔城游戏，支持键鼠、控制器和触控屏（Android™ 平台）操作。面向企业级水平调研的技术向产品。

## 特色

- 专业级别的系统抽象设计；
- 富有运动感的画面捕捉机制；
- 百般打磨的数值填充；
- ......

## 特性实装路线图

- 控制
  - [x] 键鼠
  - [x] 控制器
  - [x] 触控屏
- 核心玩法
  - [ ] 高效运动
  - [ ] 技能树
  - [x] 存档
  - [ ] 背包
  - [ ] 饰品
  - [ ] 商店
  - [ ] 传送网络
  - [ ] 多人游戏
  - [ ] 聊天
  - [ ] 内部指令
- 客户支持
  - [ ] 设置
  - [ ] 云同步
  - [ ] 激活验证

## 控制

玩家可通过多种方式与系统交互。

> 控制器以 Xbox Series S/X 主机附赠的版本为例。

| 按键                                                                                            | 功能                                                                                                                                                            |
| ----------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <kbd>A</kbd> 或 ![左摇杆](../Assets/30px-XboxOne_Left_Stick.png) 左                             | 向左移动                                                                                                                                                        |
| <kbd>D</kbd> 或 ![左摇杆](../Assets/30px-XboxOne_Left_Stick.png) 右                             | 向右移动                                                                                                                                                        |
| 左 <kbd>Shift</kbd> 或 ![左摇杆](../Assets/30px-XboxOne_Left_Stick.png) 下按                    | 猛冲                                                                                                                                                            |
| <kbd>Space</kbd> 或 ![A](../Assets/30px-XboxOne_A.png)                                          | 跳跃                                                                                                                                                            |
| ![鼠标左键](../Assets/40px-Keyboard_Black_Mouse_Left.png) 或 ![X](../Assets/30px-XboxOne_X.png) | 普通攻击。无论用户按击多快，都会受到攻速系统的强行阻滞。当附近有 NPC 时，改为与其对话。当附近有十字架塑像时，改为激活传送网络。当附近有女神像时，改为打开商店。 |
| <kbd>Q</kbd> 或 ![Y](../Assets/30px-XboxOne_Y.png)                                              | 长按蓄力重击，并造成明显的击退。在最终造成伤害前，松开都会导致释放失败。                                                                                        |
| <kbd>E</kbd> 或 ![B](../Assets/30px-XboxOne_B.png)                                              | 使用技能                                                                                                                                                        |
| <kbd>Tab</kbd> 或 ![左肩键](../Assets/30px-XboxOne_LB.png)                                      | 打开背包                                                                                                                                                        |

在携带触控屏的设备上，应用程序具有显式的 HUD，因此不予介绍。

## 实体系统

角色（Avatar）、环境内高度可交互对象和敌怪统称为**实体**（Entity）。

| 名称         | 描述                                                                                                                                                                                                                                                                                                                                                                                                                   | 基础攻击力 | 防御力 | 基础移速 | 基础冷却 | 特别技能                   |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------- | ------ | -------- | -------- | -------------------------- |
| 靶子         | 靶子不会主动做出任何行为。                                                                                                                                                                                                                                                                                                                                                                                             | 0          | 0      | 0        | 999      | -                          |
| 鬣狗         | 鬣狗会以自身为中心，不断的搜索附近的角色。若未能找到，则左右闲逛；否则以最近的一个为目标，自身移速变为原先的 2 倍，向其位置在 x 轴上移动，若遇到墙壁且自身未腾空，则尝试跳跃。                                                                                                                                                                                                                                         | 10         | 0      | 1        | 3        | -                          |
| 陆龟         | 陆龟会以自身为中心，不断的搜索附近的实体。若未能找到，则左右闲逛；否则以最近的一个为目标，自身向天空腾飞，向其位置在 x 轴上移动，坠落造成大量伤害。                                                                                                                                                                                                                                                                    | 25         | 30     | 1        | 5        | -                          |
| 腐败的向阳花 | 腐败的向阳花（下称腐花）无视全部碰撞体，可以自由在空气和地块中穿梭。由于惧怕阳光的缘故，腐花总是会躲在地块里，远远地望着玩家。但每隔一段时间，腐花仍会快速向玩家冲来，并造成巨额伤害和击退，然后再次钻进地块中。当腐花生命值不足 50% 后，将从四面八方召唤植物毒刺飞弹向玩家射去，并大幅减短每两次冲刺间的等待时间。如果玩家在这一阶段试图逃跑（远离腐花出生点 30f 距离），则每颗飞弹攻击力提升至 9999、移速提高 300%。 | 33         | 0      | 1        | 10       | “绝望的冲刺”；“有形的怒火” |

## 技能系统

技能是实体主动影响其他实体（包含自身）的唯一途径。

技能同时受到**技能点数/法力**（Mana）和**冷却**（CD）的限制，两者均满足一次释放所消耗的量才能成功释放。

### 元技能

所有的实体均掌握元技能，它们是构成实体的基本要素，释放时不消耗技能点数。

- **普通攻击**（Plain Attack）：对于角色来说，每次普通攻击都会搜索小范围内全部的可攻击目标（不限于敌怪），并分别造成一次伤害。无论是否命中目标，都会重置冷却计数器。对于敌怪来说，每次触碰到角色都会尝试普通攻击，若短时间触碰多个角色，则只攻击最先接触到的角色。

### 角色技能

玩家可以部署它们之一到技能位上，并条件触发它。

| 名称 | 描述                                                                                                                                          | 技能点数消耗 | 冷却（秒） | 获取方式              |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ---------- | --------------------- |
| 射击 | 向光标或右摇杆指向方向掷出一枚射弹，遇到墙壁或可攻击单位则以自身为中心，令 3 半径圆周内全部可攻击单位受到 15 伤害。                           | 5            | 0.7        | 向女神像供奉 50 代币  |
| 抓索 | 向光标或右摇杆指向方向抛出一根带钩爪的绳索，遇到墙壁则将自己拖拽到附着点附近，随即松开钩爪。若墙壁距自身超过 20 距离，则不会产生任何效果。    | 10           | 0.7        | 向女神像供奉 120 代币 |
| 魅惑 | 以自身为中心，令 30 半径圆周内全部敌方单位无害化（相当于自己隐身且不会受到来自敌方单位的伤害，但仍会受到环境的影响），持续 5s。效果不能叠加。 | 50           | 20         | 在特定的木匣里发现    |
| 悲歌 | 消耗自身最大生命值 50% 的生命（不足则扣至剩余 1 点），换取 70% 的免伤和 30% 的攻速加成，持续 25s。效果不能叠加。                              | 50           | 45         | 击败腐败的向阳花      |

### 敌怪技能

敌怪将不停尝试在能看到角色时无序发动这些技能。

| 名称         | 描述                                                                                                                                                                                                                                            | 技能点数消耗 | 冷却（秒） | 发起者       |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ---------- | ------------ |
| “绝望的冲刺” | 瞄准玩家当前位置 O，找到自身以点 O 为基准的对称点 B，并向点 B 高速移动，对路径上的玩家造成 25 伤害。若玩家位置变化，自己的移动路径不变。                                                                                                        | 10           | 10         | 腐败的向阳花 |
| “有形的怒火” | 当自身血量低于 50% 时，可在屏幕外部召唤一根植物毒刺，它全图追踪离自己最近的玩家，且不会受到伤害，击中玩家造成 1 伤害后消失。如果玩家离自身出生点超过 30f 距离，毒刺攻击力提升至 9999、移速提高 300%。只要有毒刺在场，自身全部技能冷却减少 70%。 | 1            | 1          | 腐败的向阳花 |

## 效果系统

效果是限时附着在实体上的对象，等效于类装饰器。

| 名称 | 描述                                                  |
| ---- | ----------------------------------------------------- |
| 恐惧 | 令实体的攻击力和移速增加 30%，但受到的伤害增加 100%。 |

## 控制反转系统

实体间的通信主要依赖控制反转系统，且严格确保类型安全。

| 参与者名称       | 描述                         |
| ---------------- | ---------------------------- |
| 角色             | 玩家所操纵的实体             |
| 角色摄像机       | 玩家所看见的画面             |
| 世界             | 主要掌管生物生成和判定二段跳 |
| 背包             | 玩家所持有的物品集合         |
| 商店             | 玩家可消耗代币换取的物品集合 |
| 商店塑像         | 用于触发与商店相关的事件     |
| 全局通知组件     | 主字幕                       |
| 二级全局通知组件 | 副字幕                       |

## 关于

1. Unity 是 Unity Technologies 的注册商标。
2. Android 是 Google Inc. 的注册商标。
3. 除却与各个商业公司有关的部分，Penyo 保有对全体源代码的所有权。任何组织和个人未取得授权不得引用任意部分。由自行编译、变造所带来的法律责任，由最终编辑者完全承担。
